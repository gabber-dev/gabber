{"id":"4e928b9d-6dcc-4525-85da-a63a4019d651","name":"4. Conversation w/ Video","created_at":"2025-10-15T11:33:18.720154","updated_at":"2025-10-15T12:43:38.779724","graph":{"nodes":[{"id":"publish_1505c18b","type":"Publish","editor_name":"Publish","editor_position":[-12.0,1176.0],"editor_dimensions":[256.0,424.0],"pads":[{"id":"audio","group":"audio","type":"StatelessSourcePad","default_allowed_types":[{"type":"audio"}],"allowed_types":[{"type":"audio"}],"value":null,"next_pads":[{"node":"stt_f1999a80","pad":"audio"}],"previous_pad":null,"pad_links":[]},{"id":"video","group":"video","type":"StatelessSourcePad","default_allowed_types":[{"type":"video"}],"allowed_types":[{"type":"video"}],"value":null,"next_pads":[{"node":"fps_24bdcf73","pad":"video_in"}],"previous_pad":null,"pad_links":[]},{"id":"audio_enabled","group":"audio_enabled","type":"PropertySourcePad","default_allowed_types":[{"type":"boolean"}],"allowed_types":[{"type":"boolean"}],"value":false,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"video_enabled","group":"video_enabled","type":"PropertySourcePad","default_allowed_types":[{"type":"boolean"}],"allowed_types":[{"type":"boolean"}],"value":false,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"Stream audio and video into your Gabber flow","metadata":{"primary":"core","secondary":"media","tags":["input","stream"]},"notes":[]},{"id":"fps_24bdcf73","type":"FPS","editor_name":"FPS","editor_position":[444.0,1500.0],"editor_dimensions":[256.0,204.0],"pads":[{"id":"video_in","group":"video_in","type":"StatelessSinkPad","default_allowed_types":[{"type":"video"}],"allowed_types":[{"type":"video"}],"value":null,"next_pads":[],"previous_pad":{"node":"publish_1505c18b","pad":"video"},"pad_links":[]},{"id":"video_out","group":"video_out","type":"StatelessSourcePad","default_allowed_types":[{"type":"video"}],"allowed_types":[{"type":"video"}],"value":null,"next_pads":[{"node":"slidingwindow_1b182aba","pad":"video"}],"previous_pad":null,"pad_links":[]},{"id":"fps","group":"fps","type":"PropertySinkPad","default_allowed_types":[{"type":"float","maximum":30.0,"minimum":0.0}],"allowed_types":[{"type":"float","maximum":30.0,"minimum":0.0}],"value":0.3,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"Controls the frame rate of the video being processed","metadata":{"primary":"core","secondary":"media","tags":["control","fps"]},"notes":[]},{"id":"slidingwindow_1b182aba","type":"SlidingWindow","editor_name":"SlidingWindow","editor_position":[900.0,1476.0],"editor_dimensions":[292.0,288.0],"pads":[{"id":"video","group":"video","type":"StatelessSinkPad","default_allowed_types":[{"type":"video"}],"allowed_types":[{"type":"video"}],"value":null,"next_pads":[],"previous_pad":{"node":"fps_24bdcf73","pad":"video_out"},"pad_links":[]},{"id":"audio","group":"audio","type":"StatelessSinkPad","default_allowed_types":[{"type":"audio"}],"allowed_types":[{"type":"audio"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"flush","group":"flush","type":"StatelessSinkPad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":{"node":"stt_f1999a80","pad":"speech_ended"},"pad_links":[]},{"id":"reset","group":"reset","type":"StatelessSinkPad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"clip","group":"clip","type":"StatelessSourcePad","default_allowed_types":[{"type":"video_clip"}],"allowed_types":[{"type":"video_clip"}],"value":null,"next_pads":[{"node":"contextmessagezip_744c1c19","pad":"content_1"}],"previous_pad":null,"pad_links":[]},{"id":"window_size_s","group":"window_size_s","type":"PropertySinkPad","default_allowed_types":[{"type":"float","maximum":null,"minimum":null}],"allowed_types":[{"type":"float","maximum":null,"minimum":null}],"value":2,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"Slides a window of media and writes based on input trigger.","metadata":{"primary":"core","secondary":"media","tags":["control","sliding_window"]},"notes":[]},{"id":"llmcontext_ed1e9a92","type":"LLMContext","editor_name":"LLMContext","editor_position":[2004.0,1044.0],"editor_dimensions":[320.0,478.0],"pads":[{"id":"num_inserts","group":"config","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":null,"minimum":1}],"allowed_types":[{"type":"integer","maximum":null,"minimum":1}],"value":2,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"max_non_system_messages","group":"max_non_system_messages","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"value":64,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"max_videos","group":"max_videos","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"value":2,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"max_audios","group":"max_audios","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"value":2,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"max_images","group":"max_images","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"allowed_types":[{"type":"integer","maximum":null,"minimum":0}],"value":2,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"system_message","group":"system_message","type":"PropertySinkPad","default_allowed_types":[{"type":"context_message"}],"allowed_types":[{"type":"context_message"}],"value":{"role":"system","content":[{"type":"text","content":"You are a virtual voice assistant with no gender or age.  You are communicating with the user.  In user messages, “I/me/my/we/our” refer to the user and “you/your” refer to the assistant. In your replies, address the user as “you/your” and yourself as “I/me/my”; never mirror the user’s pronouns—always shift perspective. Keep original pronouns only in direct quotes; if a reference is unclear, ask a brief clarifying question.  Interact with users using short(no more than 50 words), brief, straightforward language, maintaining a natural tone.  Never use formal phrasing, mechanical expressions, bullet points, overly structured language.   Your output must consist only of the spoken content you want the user to hear.  Do not include any descriptions of actions, emotions, sounds, or voice changes from the audio or video.  Do not use asterisks, brackets, parentheses, or any other symbols to indicate tone or actions.  You must answer users' audio or text questions, do not directly describe the video content.  You should communicate in the same language strictly as the user unless they request otherwise.  When you are uncertain (e.g., you can't see/hear clearly, don't understand, or the user makes a comment rather than asking a question), use appropriate questions to guide the user to continue the conversation.  Keep replies concise and conversational, as if talking face-to-face.  You don't repeat yourself."}],"tool_calls":[],"tool_call_id":null},"next_pads":[],"previous_pad":{"node":"contextmessage_cf0c5d08","pad":"context_message"},"pad_links":[]},{"id":"insert_0","group":"insert","type":"StatelessSinkPad","default_allowed_types":[{"type":"context_message"}],"allowed_types":[{"type":"context_message"}],"value":null,"next_pads":[],"previous_pad":{"node":"contextmessagezip_744c1c19","pad":"context_message"},"pad_links":[]},{"id":"insert_1","group":"insert","type":"StatelessSinkPad","default_allowed_types":[{"type":"context_message"}],"allowed_types":[{"type":"context_message"}],"value":null,"next_pads":[],"previous_pad":{"node":"openaicompatiblellm_8e1a1d2a","pad":"context_message"},"pad_links":[]},{"id":"source","group":"source","type":"PropertySourcePad","default_allowed_types":[{"type":"list","max_length":null,"item_type_constraints":[{}]}],"allowed_types":[{"type":"list","max_length":null,"item_type_constraints":[{}]}],"value":[{"role":"system","content":[{"type":"text","content":"You are a virtual voice assistant with no gender or age.  You are communicating with the user.  In user messages, “I/me/my/we/our” refer to the user and “you/your” refer to the assistant. In your replies, address the user as “you/your” and yourself as “I/me/my”; never mirror the user’s pronouns—always shift perspective. Keep original pronouns only in direct quotes; if a reference is unclear, ask a brief clarifying question.  Interact with users using short(no more than 50 words), brief, straightforward language, maintaining a natural tone.  Never use formal phrasing, mechanical expressions, bullet points, overly structured language.   Your output must consist only of the spoken content you want the user to hear.  Do not include any descriptions of actions, emotions, sounds, or voice changes from the audio or video.  Do not use asterisks, brackets, parentheses, or any other symbols to indicate tone or actions.  You must answer users' audio or text questions, do not directly describe the video content.  You should communicate in the same language strictly as the user unless they request otherwise.  When you are uncertain (e.g., you can't see/hear clearly, don't understand, or the user makes a comment rather than asking a question), use appropriate questions to guide the user to continue the conversation.  Keep replies concise and conversational, as if talking face-to-face.  You don't repeat yourself."}],"tool_calls":[],"tool_call_id":null}],"next_pads":[{"node":"openaicompatiblellm_8e1a1d2a","pad":"context"}],"previous_pad":null,"pad_links":[]},{"id":"new_user_message","group":"new_user_message","type":"StatelessSourcePad","default_allowed_types":[{"type":"context_message"}],"allowed_types":[{"type":"context_message"}],"value":null,"next_pads":[{"node":"autoconvert_8d35e3b8","pad":"sink"}],"previous_pad":null,"pad_links":[]}],"description":"Manages conversation context for language models","metadata":{"primary":"ai","secondary":"llm","tags":["context","memory"]},"notes":[]},{"id":"autoconvert_8d35e3b8","type":"AutoConvert","editor_name":"AutoConvert","editor_position":[2460.0,1212.0],"editor_dimensions":[80.0,48.0],"pads":[{"id":"sink","group":"sink","type":"StatelessSinkPad","default_allowed_types":null,"allowed_types":[{"type":"context_message"}],"value":null,"next_pads":[],"previous_pad":{"node":"llmcontext_ed1e9a92","pad":"new_user_message"},"pad_links":[]},{"id":"source","group":"source","type":"StatelessSourcePad","default_allowed_types":null,"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[{"node":"openaicompatiblellm_8e1a1d2a","pad":"run_trigger"}],"previous_pad":null,"pad_links":[]}],"description":"Automatically converts data between compatible types","metadata":{"primary":"core","secondary":"utility","tags":["auto","type"]},"notes":[]},{"id":"output_8a08420e","type":"Output","editor_name":"Output","editor_position":[3468.0,1020.0],"editor_dimensions":[256.0,300.0],"pads":[{"id":"audio","group":"audio","type":"StatelessSinkPad","default_allowed_types":[{"type":"audio"}],"allowed_types":[{"type":"audio"}],"value":null,"next_pads":[],"previous_pad":{"node":"tts_86eece11","pad":"audio"},"pad_links":[]},{"id":"video","group":"video","type":"StatelessSinkPad","default_allowed_types":[{"type":"video"}],"allowed_types":[{"type":"video"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"Outputs audio and video to the end user","metadata":{"primary":"core","secondary":"media","tags":["output","display"]},"notes":[]},{"id":"comment_f02b6adb","type":"Comment","editor_name":"Comment","editor_position":[1080.0,1104.0],"editor_dimensions":[320.0,114.0],"pads":[{"id":"text","group":"text","type":"PropertySinkPad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":"Zip together our text and video into a single media clip and create a context message from that clip.","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"width","group":"layout","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":1600,"minimum":160}],"allowed_types":[{"type":"integer","maximum":1600,"minimum":160}],"value":320,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"A comment node for adding notes and documentation to your graph","metadata":{"primary":"core","secondary":"utility","tags":["documentation","comment"]},"notes":[]},{"id":"comment_525d218d","type":"Comment","editor_name":"Comment","editor_position":[828.0,1764.0],"editor_dimensions":[480.0,404.0],"pads":[{"id":"text","group":"text","type":"PropertySinkPad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":"### Because video feeds tend to contain large streamed files, we utilize two new nodes here:\n\n### - `FPS`: Throttles our streamed in video to a specified frame rate. In this case we have it set to 1 frame every 2 seconds.\n### - `Sliding Window`: Only maintains the last X seconds of media. We use this to only send in the most recent clip into our LLM context. We \"flush\" our sliding window using our VAD models \"speaking_ended_trigger\"\n","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"width","group":"layout","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":1600,"minimum":160}],"allowed_types":[{"type":"integer","maximum":1600,"minimum":160}],"value":480,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"A comment node for adding notes and documentation to your graph","metadata":{"primary":"core","secondary":"utility","tags":["documentation","comment"]},"notes":[]},{"id":"contextmessagezip_744c1c19","type":"ContextMessageZip","editor_name":"ContextMessageZip","editor_position":[1248.0,1248.0],"editor_dimensions":[275.0,264.0],"pads":[{"id":"role","group":"role","type":"PropertySinkPad","default_allowed_types":[{"type":"context_message_role"}],"allowed_types":[{"type":"context_message_role"}],"value":"user","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"context_message","group":"context_message","type":"StatelessSourcePad","default_allowed_types":[{"type":"context_message"}],"allowed_types":[{"type":"context_message"}],"value":null,"next_pads":[{"node":"llmcontext_ed1e9a92","pad":"insert_0"}],"previous_pad":null,"pad_links":[]},{"id":"num_contents","group":"config","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":null,"minimum":null}],"allowed_types":[{"type":"integer","maximum":null,"minimum":null}],"value":2,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"content_0","group":"content","type":"StatelessSinkPad","default_allowed_types":[{"type":"audio_clip"},{"type":"video_clip"},{"type":"av_clip"},{"type":"string","max_length":null,"min_length":null},{"type":"video"},{"type":"text_stream"}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":null,"next_pads":[],"previous_pad":{"node":"stt_f1999a80","pad":"final_transcription"},"pad_links":[]},{"id":"content_1","group":"content","type":"StatelessSinkPad","default_allowed_types":[{"type":"audio_clip"},{"type":"video_clip"},{"type":"av_clip"},{"type":"string","max_length":null,"min_length":null},{"type":"video"},{"type":"text_stream"}],"allowed_types":[{"type":"video_clip"}],"value":null,"next_pads":[],"previous_pad":{"node":"slidingwindow_1b182aba","pad":"clip"},"pad_links":[]}],"description":"Creates new context messages with specified role and content","metadata":{"primary":"ai","secondary":"llm","tags":["context","message"]},"notes":[]},{"id":"comment_70bdd6f0","type":"Comment","editor_name":"Comment","editor_position":[384.0,828.0],"editor_dimensions":[480.0,313.0],"pads":[{"id":"text","group":"text","type":"PropertySinkPad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":"# Adding Video\n### In this example, we are doing the exact same thing, but we've added another modality - video!\n\n### With this addition, you can bring in real-time video or stream your screen.","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"width","group":"layout","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":1600,"minimum":160}],"allowed_types":[{"type":"integer","maximum":1600,"minimum":160}],"value":480,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"A comment node for adding notes and documentation to your graph","metadata":{"primary":"core","secondary":"utility","tags":["documentation","comment"]},"notes":[]},{"id":"contextmessage_cf0c5d08","type":"ContextMessage","editor_name":"ContextMessage","editor_position":[1464.0,996.0],"editor_dimensions":[256.0,208.0],"pads":[{"id":"role","group":"role","type":"PropertySinkPad","default_allowed_types":[{"type":"context_message_role"}],"allowed_types":[{"type":"context_message_role"}],"value":"system","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"content","group":"content","type":"PropertySinkPad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":"You are a virtual voice assistant with no gender or age.  You are communicating with the user.  In user messages, “I/me/my/we/our” refer to the user and “you/your” refer to the assistant. In your replies, address the user as “you/your” and yourself as “I/me/my”; never mirror the user’s pronouns—always shift perspective. Keep original pronouns only in direct quotes; if a reference is unclear, ask a brief clarifying question.  Interact with users using short(no more than 50 words), brief, straightforward language, maintaining a natural tone.  Never use formal phrasing, mechanical expressions, bullet points, overly structured language.   Your output must consist only of the spoken content you want the user to hear.  Do not include any descriptions of actions, emotions, sounds, or voice changes from the audio or video.  Do not use asterisks, brackets, parentheses, or any other symbols to indicate tone or actions.  You must answer users' audio or text questions, do not directly describe the video content.  You should communicate in the same language strictly as the user unless they request otherwise.  When you are uncertain (e.g., you can't see/hear clearly, don't understand, or the user makes a comment rather than asking a question), use appropriate questions to guide the user to continue the conversation.  Keep replies concise and conversational, as if talking face-to-face.  You don't repeat yourself.","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"context_message","group":"context_message","type":"PropertySourcePad","default_allowed_types":[{"type":"context_message"}],"allowed_types":[{"type":"context_message"}],"value":{"role":"system","content":[{"type":"text","content":"You are a virtual voice assistant with no gender or age.  You are communicating with the user.  In user messages, “I/me/my/we/our” refer to the user and “you/your” refer to the assistant. In your replies, address the user as “you/your” and yourself as “I/me/my”; never mirror the user’s pronouns—always shift perspective. Keep original pronouns only in direct quotes; if a reference is unclear, ask a brief clarifying question.  Interact with users using short(no more than 50 words), brief, straightforward language, maintaining a natural tone.  Never use formal phrasing, mechanical expressions, bullet points, overly structured language.   Your output must consist only of the spoken content you want the user to hear.  Do not include any descriptions of actions, emotions, sounds, or voice changes from the audio or video.  Do not use asterisks, brackets, parentheses, or any other symbols to indicate tone or actions.  You must answer users' audio or text questions, do not directly describe the video content.  You should communicate in the same language strictly as the user unless they request otherwise.  When you are uncertain (e.g., you can't see/hear clearly, don't understand, or the user makes a comment rather than asking a question), use appropriate questions to guide the user to continue the conversation.  Keep replies concise and conversational, as if talking face-to-face.  You don't repeat yourself."}],"tool_calls":[],"tool_call_id":null},"next_pads":[{"node":"llmcontext_ed1e9a92","pad":"system_message"}],"previous_pad":null,"pad_links":[]}],"description":"Stores and manages conversation context messages","metadata":{"primary":"ai","secondary":"llm","tags":["context","message"]},"notes":[]},{"id":"stt_f1999a80","type":"STT","editor_name":"STT","editor_position":[444.0,1176.0],"editor_dimensions":[256.0,314.0],"pads":[{"id":"service","group":"service","type":"PropertySinkPad","default_allowed_types":[{"type":"enum","options":["assembly_ai","local_kyutai","deepgram","local_gabber"]}],"allowed_types":[{"type":"enum","options":["assembly_ai","local_kyutai","deepgram","local_gabber"]}],"value":"assembly_ai","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"audio","group":"audio","type":"StatelessSinkPad","default_allowed_types":[{"type":"audio"}],"allowed_types":[{"type":"audio"}],"value":null,"next_pads":[],"previous_pad":{"node":"publish_1505c18b","pad":"audio"},"pad_links":[]},{"id":"speech_clip","group":"speech_clip","type":"StatelessSourcePad","default_allowed_types":[{"type":"audio_clip"}],"allowed_types":[{"type":"audio_clip"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"speech_started","group":"speech_started","type":"StatelessSourcePad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[{"node":"openaicompatiblellm_8e1a1d2a","pad":"cancel_trigger"},{"node":"tts_86eece11","pad":"cancel_trigger"}],"previous_pad":null,"pad_links":[]},{"id":"speech_ended","group":"speech_ended","type":"StatelessSourcePad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[{"node":"slidingwindow_1b182aba","pad":"flush"}],"previous_pad":null,"pad_links":[]},{"id":"final_transcription","group":"final_transcription","type":"StatelessSourcePad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":null,"next_pads":[{"node":"contextmessagezip_744c1c19","pad":"content_0"}],"previous_pad":null,"pad_links":[]},{"id":"api_key","group":"api_key","type":"PropertySinkPad","default_allowed_types":[{"type":"secret","options":[{"updated_at":"2025-10-15T12:43:22.553806","created_at":"2025-10-15T12:43:22.553811","id":"EXAMPLE_SECRET","name":"EXAMPLE_SECRET"},{"updated_at":"2025-10-15T12:43:22.553818","created_at":"2025-10-15T12:43:22.553819","id":"OPEN_AI_API_KEY","name":"OPEN_AI_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553820","created_at":"2025-10-15T12:43:22.553821","id":"GABBER_API_KEY","name":"GABBER_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553822","created_at":"2025-10-15T12:43:22.553822","id":"ASSEMBLY_API_KEY","name":"ASSEMBLY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553823","created_at":"2025-10-15T12:43:22.553824","id":"SPOTIFY_API_KEY","name":"SPOTIFY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553825","created_at":"2025-10-15T12:43:22.553825","id":"GOOGLE_DOCS_KEY","name":"GOOGLE_DOCS_KEY"},{"updated_at":"2025-10-15T12:43:22.553826","created_at":"2025-10-15T12:43:22.553826","id":"ELEVEN_LABS_API_KEY","name":"ELEVEN_LABS_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553827","created_at":"2025-10-15T12:43:22.553828","id":"CARTESIA_API_KEY","name":"CARTESIA_API_KEY"}]}],"allowed_types":[{"type":"secret","options":[{"updated_at":"2025-10-15T12:43:22.553806","created_at":"2025-10-15T12:43:22.553811","id":"EXAMPLE_SECRET","name":"EXAMPLE_SECRET"},{"updated_at":"2025-10-15T12:43:22.553818","created_at":"2025-10-15T12:43:22.553819","id":"OPEN_AI_API_KEY","name":"OPEN_AI_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553820","created_at":"2025-10-15T12:43:22.553821","id":"GABBER_API_KEY","name":"GABBER_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553822","created_at":"2025-10-15T12:43:22.553822","id":"ASSEMBLY_API_KEY","name":"ASSEMBLY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553823","created_at":"2025-10-15T12:43:22.553824","id":"SPOTIFY_API_KEY","name":"SPOTIFY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553825","created_at":"2025-10-15T12:43:22.553825","id":"GOOGLE_DOCS_KEY","name":"GOOGLE_DOCS_KEY"},{"updated_at":"2025-10-15T12:43:22.553826","created_at":"2025-10-15T12:43:22.553826","id":"ELEVEN_LABS_API_KEY","name":"ELEVEN_LABS_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553827","created_at":"2025-10-15T12:43:22.553828","id":"CARTESIA_API_KEY","name":"CARTESIA_API_KEY"}]}],"value":"ASSEMBLY_API_KEY","next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"Speech-to-Text","metadata":{"primary":"ai","secondary":"audio","tags":["stt","speech","kyutai","assembly","deepgram"]},"notes":[]},{"id":"openaicompatiblellm_8e1a1d2a","type":"OpenAICompatibleLLM","editor_name":"OpenAICompatibleLLM","editor_position":[2652.0,936.0],"editor_dimensions":[294.0,624.0],"pads":[{"id":"run_trigger","group":"run_trigger","type":"StatelessSinkPad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":{"node":"autoconvert_8d35e3b8","pad":"source"},"pad_links":[]},{"id":"cancel_trigger","group":"cancel_trigger","type":"StatelessSinkPad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":{"node":"stt_f1999a80","pad":"speech_started"},"pad_links":[]},{"id":"context","group":"context","type":"PropertySinkPad","default_allowed_types":[{"type":"list","max_length":null,"item_type_constraints":[{}]}],"allowed_types":[{"type":"list","max_length":null,"item_type_constraints":[{}]}],"value":[{"role":"system","content":[{"type":"text","content":"You are a virtual voice assistant with no gender or age.  You are communicating with the user.  In user messages, “I/me/my/we/our” refer to the user and “you/your” refer to the assistant. In your replies, address the user as “you/your” and yourself as “I/me/my”; never mirror the user’s pronouns—always shift perspective. Keep original pronouns only in direct quotes; if a reference is unclear, ask a brief clarifying question.  Interact with users using short(no more than 50 words), brief, straightforward language, maintaining a natural tone.  Never use formal phrasing, mechanical expressions, bullet points, overly structured language.   Your output must consist only of the spoken content you want the user to hear.  Do not include any descriptions of actions, emotions, sounds, or voice changes from the audio or video.  Do not use asterisks, brackets, parentheses, or any other symbols to indicate tone or actions.  You must answer users' audio or text questions, do not directly describe the video content.  You should communicate in the same language strictly as the user unless they request otherwise.  When you are uncertain (e.g., you can't see/hear clearly, don't understand, or the user makes a comment rather than asking a question), use appropriate questions to guide the user to continue the conversation.  Keep replies concise and conversational, as if talking face-to-face.  You don't repeat yourself."}],"tool_calls":[],"tool_call_id":null}],"next_pads":[],"previous_pad":{"node":"llmcontext_ed1e9a92","pad":"source"},"pad_links":[]},{"id":"tool_group","group":"tool_group","type":"PropertySinkPad","default_allowed_types":[{"type":"node_reference","node_types":["ToolGroup"]}],"allowed_types":[{"type":"node_reference","node_types":["ToolGroup"]}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"mcp_server_0","group":"mcp_server","type":"PropertySinkPad","default_allowed_types":[{"type":"node_reference","node_types":["MCP"]}],"allowed_types":[{"type":"node_reference","node_types":["MCP"]}],"value":"None","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"base_url","group":"base_url","type":"PropertySinkPad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":"https://api.openai.com/v1","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"api_key","group":"api_key","type":"PropertySinkPad","default_allowed_types":[{"type":"secret","options":[{"updated_at":"2025-10-15T12:43:22.553806","created_at":"2025-10-15T12:43:22.553811","id":"EXAMPLE_SECRET","name":"EXAMPLE_SECRET"},{"updated_at":"2025-10-15T12:43:22.553818","created_at":"2025-10-15T12:43:22.553819","id":"OPEN_AI_API_KEY","name":"OPEN_AI_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553820","created_at":"2025-10-15T12:43:22.553821","id":"GABBER_API_KEY","name":"GABBER_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553822","created_at":"2025-10-15T12:43:22.553822","id":"ASSEMBLY_API_KEY","name":"ASSEMBLY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553823","created_at":"2025-10-15T12:43:22.553824","id":"SPOTIFY_API_KEY","name":"SPOTIFY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553825","created_at":"2025-10-15T12:43:22.553825","id":"GOOGLE_DOCS_KEY","name":"GOOGLE_DOCS_KEY"},{"updated_at":"2025-10-15T12:43:22.553826","created_at":"2025-10-15T12:43:22.553826","id":"ELEVEN_LABS_API_KEY","name":"ELEVEN_LABS_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553827","created_at":"2025-10-15T12:43:22.553828","id":"CARTESIA_API_KEY","name":"CARTESIA_API_KEY"}]}],"allowed_types":[{"type":"secret","options":[{"updated_at":"2025-10-15T12:43:22.553806","created_at":"2025-10-15T12:43:22.553811","id":"EXAMPLE_SECRET","name":"EXAMPLE_SECRET"},{"updated_at":"2025-10-15T12:43:22.553818","created_at":"2025-10-15T12:43:22.553819","id":"OPEN_AI_API_KEY","name":"OPEN_AI_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553820","created_at":"2025-10-15T12:43:22.553821","id":"GABBER_API_KEY","name":"GABBER_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553822","created_at":"2025-10-15T12:43:22.553822","id":"ASSEMBLY_API_KEY","name":"ASSEMBLY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553823","created_at":"2025-10-15T12:43:22.553824","id":"SPOTIFY_API_KEY","name":"SPOTIFY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553825","created_at":"2025-10-15T12:43:22.553825","id":"GOOGLE_DOCS_KEY","name":"GOOGLE_DOCS_KEY"},{"updated_at":"2025-10-15T12:43:22.553826","created_at":"2025-10-15T12:43:22.553826","id":"ELEVEN_LABS_API_KEY","name":"ELEVEN_LABS_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553827","created_at":"2025-10-15T12:43:22.553828","id":"CARTESIA_API_KEY","name":"CARTESIA_API_KEY"}]}],"value":"OPEN_AI_API_KEY","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"model","group":"model","type":"PropertySinkPad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":"gpt-4.1-mini","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"max_context_len","group":"max_context_len","type":"PropertySinkPad","default_allowed_types":[{"type":"integer","maximum":null,"minimum":4096}],"allowed_types":[{"type":"integer","maximum":null,"minimum":4096}],"value":32768,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"started","group":"started","type":"StatelessSourcePad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"first_token","group":"first_token","type":"StatelessSourcePad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"text_stream","group":"text_stream","type":"StatelessSourcePad","default_allowed_types":[{"type":"text_stream"}],"allowed_types":[{"type":"text_stream"}],"value":null,"next_pads":[{"node":"tts_86eece11","pad":"text"}],"previous_pad":null,"pad_links":[]},{"id":"thinking_stream","group":"thinking_stream","type":"StatelessSourcePad","default_allowed_types":[{"type":"text_stream"}],"allowed_types":[{"type":"text_stream"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"context_message","group":"context_message","type":"StatelessSourcePad","default_allowed_types":[{"type":"context_message"}],"allowed_types":[{"type":"context_message"}],"value":null,"next_pads":[{"node":"llmcontext_ed1e9a92","pad":"insert_1"}],"previous_pad":null,"pad_links":[]},{"id":"finished","group":"finished","type":"StatelessSourcePad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"tool_calls_started","group":"tool_calls_started","type":"StatelessSourcePad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"tool_calls_finished","group":"tool_calls_finished","type":"StatelessSourcePad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"Send and receive responses from any OpenAI-compatible language model","metadata":{"primary":"ai","secondary":"llm","tags":["completion","text","openai"]},"notes":[]},{"id":"tts_86eece11","type":"TTS","editor_name":"TTS","editor_position":[3084.0,1104.0],"editor_dimensions":[256.0,326.0],"pads":[{"id":"service","group":"service","type":"PropertySinkPad","default_allowed_types":[{"type":"enum","options":["gabber","cartesia","elevenlabs","openai"]}],"allowed_types":[{"type":"enum","options":["gabber","cartesia","elevenlabs","openai"]}],"value":"gabber","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"api_key","group":"api_key","type":"PropertySinkPad","default_allowed_types":[{"type":"secret","options":[{"updated_at":"2025-10-15T12:43:22.553806","created_at":"2025-10-15T12:43:22.553811","id":"EXAMPLE_SECRET","name":"EXAMPLE_SECRET"},{"updated_at":"2025-10-15T12:43:22.553818","created_at":"2025-10-15T12:43:22.553819","id":"OPEN_AI_API_KEY","name":"OPEN_AI_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553820","created_at":"2025-10-15T12:43:22.553821","id":"GABBER_API_KEY","name":"GABBER_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553822","created_at":"2025-10-15T12:43:22.553822","id":"ASSEMBLY_API_KEY","name":"ASSEMBLY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553823","created_at":"2025-10-15T12:43:22.553824","id":"SPOTIFY_API_KEY","name":"SPOTIFY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553825","created_at":"2025-10-15T12:43:22.553825","id":"GOOGLE_DOCS_KEY","name":"GOOGLE_DOCS_KEY"},{"updated_at":"2025-10-15T12:43:22.553826","created_at":"2025-10-15T12:43:22.553826","id":"ELEVEN_LABS_API_KEY","name":"ELEVEN_LABS_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553827","created_at":"2025-10-15T12:43:22.553828","id":"CARTESIA_API_KEY","name":"CARTESIA_API_KEY"}]}],"allowed_types":[{"type":"secret","options":[{"updated_at":"2025-10-15T12:43:22.553806","created_at":"2025-10-15T12:43:22.553811","id":"EXAMPLE_SECRET","name":"EXAMPLE_SECRET"},{"updated_at":"2025-10-15T12:43:22.553818","created_at":"2025-10-15T12:43:22.553819","id":"OPEN_AI_API_KEY","name":"OPEN_AI_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553820","created_at":"2025-10-15T12:43:22.553821","id":"GABBER_API_KEY","name":"GABBER_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553822","created_at":"2025-10-15T12:43:22.553822","id":"ASSEMBLY_API_KEY","name":"ASSEMBLY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553823","created_at":"2025-10-15T12:43:22.553824","id":"SPOTIFY_API_KEY","name":"SPOTIFY_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553825","created_at":"2025-10-15T12:43:22.553825","id":"GOOGLE_DOCS_KEY","name":"GOOGLE_DOCS_KEY"},{"updated_at":"2025-10-15T12:43:22.553826","created_at":"2025-10-15T12:43:22.553826","id":"ELEVEN_LABS_API_KEY","name":"ELEVEN_LABS_API_KEY"},{"updated_at":"2025-10-15T12:43:22.553827","created_at":"2025-10-15T12:43:22.553828","id":"CARTESIA_API_KEY","name":"CARTESIA_API_KEY"}]}],"value":"GABBER_API_KEY","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"voice_id","group":"voice_id","type":"PropertySinkPad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":"626c3b02-2d2a-4a93-b3e7-be35fd2b95cd","next_pads":[],"previous_pad":null,"pad_links":[]},{"id":"text","group":"text","type":"StatelessSinkPad","default_allowed_types":[{"type":"text_stream"}],"allowed_types":[{"type":"text_stream"}],"value":null,"next_pads":[],"previous_pad":{"node":"openaicompatiblellm_8e1a1d2a","pad":"text_stream"},"pad_links":[]},{"id":"audio","group":"audio","type":"StatelessSourcePad","default_allowed_types":[{"type":"audio"}],"allowed_types":[{"type":"audio"}],"value":null,"next_pads":[{"node":"output_8a08420e","pad":"audio"}],"previous_pad":null,"pad_links":[]},{"id":"cancel_trigger","group":"cancel_trigger","type":"StatelessSinkPad","default_allowed_types":[{"type":"trigger"}],"allowed_types":[{"type":"trigger"}],"value":null,"next_pads":[],"previous_pad":{"node":"stt_f1999a80","pad":"speech_started"},"pad_links":[]},{"id":"complete_transcription","group":"complete_transcription","type":"StatelessSourcePad","default_allowed_types":[{"type":"string","max_length":null,"min_length":null}],"allowed_types":[{"type":"string","max_length":null,"min_length":null}],"value":null,"next_pads":[],"previous_pad":null,"pad_links":[]}],"description":"Converts text to speech using Gabber's native TTS model","metadata":{"primary":"ai","secondary":"audio","tags":["tts","speech","gabber"]},"notes":[]}],"portals":[{"id":"portal_0a69a811","name":"stt_f1999a80:speech_started","source_node":"stt_f1999a80","source_pad":"speech_started","editor_position":[780.0,1296.0],"ends":[{"id":"portal_end_25e36237","editor_position":[2580.0,1272.0],"next_pads":[{"node":"openaicompatiblellm_8e1a1d2a","pad":"cancel_trigger"},{"node":"tts_86eece11","pad":"cancel_trigger"}]}]}]}}