{"id":"local-conversational","name":"Local Conversational W/ Vision","created_at":"2025-08-18T17:36:49.997790","updated_at":"2025-08-19T15:12:43.890249","graph":{"nodes":[{"id":"publish_51d485ce","type":"Publish","editor_name":"Publish","editor_position":[-216.0,180.0],"editor_dimensions":[256.0,348.0],"pads":[{"id":"audio","group":"audio","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"silerovad_8b46b458","pad":"audio"}],"previous_pad":null,"allowed_types":[{"type":"audio"}]},{"id":"video","group":"video","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"fps_eedcaf02","pad":"video_in"}],"previous_pad":null,"allowed_types":[{"type":"video"}]}],"description":"Stream audio and video into your Gabber flow","metadata":{"primary":"core","secondary":"media","tags":["input","stream"]}},{"id":"silerovad_8b46b458","type":"SileroVAD","editor_name":"SileroVAD","editor_position":[312.0,144.0],"editor_dimensions":[362.0,432.0],"pads":[{"id":"audio","group":"audio","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"publish_51d485ce","pad":"audio"},"allowed_types":[{"type":"audio"}]},{"id":"audio_clip","group":"audio_clip","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"avclipzip_215e33c4","pad":"audio_clip"}],"previous_pad":null,"allowed_types":[{"type":"audio_clip"}]},{"id":"speech_started_trigger","group":"speech_started_trigger","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"localllm_ec07ef49","pad":"cancel_trigger"},{"node":"kittentts_af3695c4","pad":"cancel_trigger"}],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"speech_ended_trigger","group":"speech_ended_trigger","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"slidingwindow_80c47f54","pad":"flush"}],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"continued_speech_trigger","group":"continued_speech_trigger","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"vad_threshold","group":"vad_threshold","type":"PropertySinkPad","value":0.5,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"float","maximum":1.0,"minimum":0.0}]},{"id":"silence_duration_ms","group":"silence_duration_ms","type":"PropertySinkPad","value":500,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"float","maximum":3000.0,"minimum":0.0}]},{"id":"speech_duration_ms","group":"speech_duration_ms","type":"PropertySinkPad","value":400,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"float","maximum":3000.0,"minimum":0.0}]},{"id":"pre_speech_duration_ms","group":"pre_speech_duration_ms","type":"PropertySinkPad","value":100,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"float","maximum":1000.0,"minimum":0.0}]}],"description":"Voice Activity Detection - detects when someone is speaking","metadata":{"primary":"ai","secondary":"audio","tags":["vad","detection"]}},{"id":"localllm_ec07ef49","type":"LocalLLM","editor_name":"LocalLLM","editor_position":[1980.0,132.0],"editor_dimensions":[256.0,504.0],"pads":[{"id":"run_trigger","group":"run_trigger","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"autoconvert_12571325","pad":"source"},"allowed_types":[{"type":"trigger"}]},{"id":"started","group":"started","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"tool_calls_started","group":"tool_calls_started","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"tool_calls_finished","group":"tool_calls_finished","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"first_token","group":"first_token","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"text","group":"text","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"text_stream"}]},{"id":"thinking_stream","group":"thinking_stream","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"text_stream"}]},{"id":"context_message","group":"context_message","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"llmcontext_ed05a485","pad":"insert_1"}],"previous_pad":null,"allowed_types":[{"type":"context_message"}]},{"id":"finished","group":"finished","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"cancel_trigger","group":"cancel_trigger","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"silerovad_8b46b458","pad":"speech_started_trigger"},"allowed_types":[{"type":"trigger"}]},{"id":"context","group":"context","type":"PropertySinkPad","value":[{"role":"system","content":[{"type":"text","content":"You are a helpful assistant."}],"tool_calls":[],"tool_call_id":null}],"next_pads":[],"previous_pad":{"node":"llmcontext_ed05a485","pad":"source"},"allowed_types":[{"type":"list","max_length":null,"item_type_constraints":[{}]}]},{"id":"tool_group","group":"tool_group","type":"PropertySinkPad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"node_reference","node_types":["ToolGroup"]}]},{"id":"port","group":"port","type":"PropertySinkPad","value":7002,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"integer","maximum":null,"minimum":null}]},{"id":"text_stream","group":"text_stream","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"kittentts_af3695c4","pad":"text"}],"previous_pad":null,"allowed_types":[{"type":"text_stream"}]}],"description":"Send and receive responses from any Qwen-omni language model","metadata":{"primary":"ai","secondary":"local","tags":["completion","text","qwen-omni"]}},{"id":"llmcontext_ed05a485","type":"LLMContext","editor_name":"LLMContext","editor_position":[1392.0,240.0],"editor_dimensions":[371.0,428.0],"pads":[{"id":"source","group":"source","type":"PropertySourcePad","value":[{"role":"system","content":[{"type":"text","content":"You are a helpful assistant."}],"tool_calls":[],"tool_call_id":null}],"next_pads":[{"node":"localllm_ec07ef49","pad":"context"}],"previous_pad":null,"allowed_types":[{"type":"list","max_length":null,"item_type_constraints":[{}]}]},{"id":"system_message","group":"system_message","type":"PropertySinkPad","value":{"role":"system","content":[{"type":"text","content":"You are a helpful assistant."}],"tool_calls":[],"tool_call_id":null},"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"context_message"}]},{"id":"new_user_message","group":"new_user_message","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"autoconvert_12571325","pad":"sink"}],"previous_pad":null,"allowed_types":[{"type":"context_message"}]},{"id":"max_non_system_messages","group":"max_non_system_messages","type":"PropertySourcePad","value":64,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"integer","maximum":null,"minimum":0}]},{"id":"max_images","group":"max_images","type":"PropertySinkPad","value":2,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"integer","maximum":null,"minimum":0}]},{"id":"max_audios","group":"max_audios","type":"PropertySinkPad","value":2,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"integer","maximum":null,"minimum":0}]},{"id":"max_videos","group":"max_videos","type":"PropertySinkPad","value":2,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"integer","maximum":null,"minimum":0}]},{"id":"insert_0","group":"insert","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"createcontextmessage_41a7bd4c","pad":"context_message"},"allowed_types":[{"type":"context_message"}]},{"id":"insert_1","group":"insert","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"localllm_ec07ef49","pad":"context_message"},"allowed_types":[{"type":"context_message"}]},{"id":"insert_2","group":"insert","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"context_message"}]}],"description":"Manages conversation context for language models","metadata":{"primary":"ai","secondary":"llm","tags":["context","memory"]}},{"id":"fps_eedcaf02","type":"FPS","editor_name":"FPS","editor_position":[168.0,648.0],"editor_dimensions":[256.0,204.0],"pads":[{"id":"video_in","group":"video_in","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"publish_51d485ce","pad":"video"},"allowed_types":[{"type":"video"}]},{"id":"video_out","group":"video_out","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"slidingwindow_80c47f54","pad":"video"}],"previous_pad":null,"allowed_types":[{"type":"video"}]},{"id":"fps","group":"fps","type":"PropertySinkPad","value":0.5,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"float","maximum":30.0,"minimum":0.0}]}],"description":"Controls the frame rate of the video being processed","metadata":{"primary":"core","secondary":"media","tags":["control","fps"]}},{"id":"avclipzip_215e33c4","type":"AVClipZip","editor_name":"AVClipZip","editor_position":[768.0,408.0],"editor_dimensions":[256.0,184.0],"pads":[{"id":"video_clip","group":"video_clip","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"slidingwindow_80c47f54","pad":"clip"},"allowed_types":[{"type":"video_clip"}]},{"id":"audio_clip","group":"audio_clip","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"silerovad_8b46b458","pad":"audio_clip"},"allowed_types":[{"type":"audio_clip"}]},{"id":"av_clip","group":"av_clip","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"createcontextmessage_41a7bd4c","pad":"content"}],"previous_pad":null,"allowed_types":[{"type":"av_clip"}]}],"description":"Combines audio and video clips into a single av clip.","metadata":{"primary":"core","secondary":"media","tags":["control","clip","zip"]}},{"id":"slidingwindow_80c47f54","type":"SlidingWindow","editor_name":"SlidingWindow","editor_position":[528.0,648.0],"editor_dimensions":[292.0,288.0],"pads":[{"id":"video","group":"video","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"fps_eedcaf02","pad":"video_out"},"allowed_types":[{"type":"video"}]},{"id":"audio","group":"audio","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"audio"}]},{"id":"flush","group":"flush","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"silerovad_8b46b458","pad":"speech_ended_trigger"},"allowed_types":[{"type":"trigger"}]},{"id":"reset","group":"reset","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"trigger"}]},{"id":"clip","group":"clip","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"avclipzip_215e33c4","pad":"video_clip"}],"previous_pad":null,"allowed_types":[{"type":"video_clip"}]},{"id":"window_size_s","group":"window_size_s","type":"PropertySinkPad","value":1,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"float","maximum":null,"minimum":null}]}],"description":"Slides a window of media and writes based on input trigger.","metadata":{"primary":"core","secondary":"media","tags":["control","sliding_window"]}},{"id":"createcontextmessage_41a7bd4c","type":"CreateContextMessage","editor_name":"CreateContextMessage","editor_position":[1080.0,408.0],"editor_dimensions":[268.0,196.0],"pads":[{"id":"role","group":"role","type":"PropertySinkPad","value":"user","next_pads":[],"previous_pad":null,"allowed_types":[{"type":"context_message_role"}]},{"id":"content","group":"content","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"avclipzip_215e33c4","pad":"av_clip"},"allowed_types":[{"type":"av_clip"}]},{"id":"context_message","group":"context_message","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"llmcontext_ed05a485","pad":"insert_0"}],"previous_pad":null,"allowed_types":[{"type":"context_message"}]}],"description":"Creates new context messages with specified role and content","metadata":{"primary":"ai","secondary":"llm","tags":["context","message"]}},{"id":"autoconvert_12571325","type":"AutoConvert","editor_name":"AutoConvert","editor_position":[1812.0,420.0],"editor_dimensions":[80.0,48.0],"pads":[{"id":"sink","group":"sink","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"llmcontext_ed05a485","pad":"new_user_message"},"allowed_types":[{"type":"context_message"}]},{"id":"source","group":"source","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"localllm_ec07ef49","pad":"run_trigger"}],"previous_pad":null,"allowed_types":[{"type":"trigger"}]}],"description":"Automatically converts data between compatible types","metadata":{"primary":"core","secondary":"utility","tags":["auto","type"]}},{"id":"kittentts_af3695c4","type":"KittenTTS","editor_name":"KittenTTS","editor_position":[2496.0,204.0],"editor_dimensions":[256.0,252.0],"pads":[{"id":"voice_id","group":"voice_id","type":"PropertySinkPad","value":"expr-voice-2-m","next_pads":[],"previous_pad":null,"allowed_types":[{"type":"enum","options":["expr-voice-2-m","expr-voice-2-f","expr-voice-3-m","expr-voice-3-f","expr-voice-4-m","expr-voice-4-f","expr-voice-5-m","expr-voice-5-f"]}]},{"id":"text","group":"text","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"localllm_ec07ef49","pad":"text_stream"},"allowed_types":[{"type":"text_stream"}]},{"id":"audio","group":"audio","type":"StatelessSourcePad","value":null,"next_pads":[{"node":"output_c591f96d","pad":"audio_sink"}],"previous_pad":null,"allowed_types":[{"type":"audio"}]},{"id":"cancel_trigger","group":"cancel_trigger","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"silerovad_8b46b458","pad":"speech_started_trigger"},"allowed_types":[{"type":"trigger"}]},{"id":"complete_transcription","group":"complete_transcription","type":"StatelessSourcePad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"string","max_length":null,"min_length":null}]}],"description":"Converts text to speech using Gabber's native TTS model","metadata":{"primary":"local","secondary":"audio","tags":["tts","speech","gabber"]}},{"id":"output_c591f96d","type":"Output","editor_name":"Output","editor_position":[2916.0,192.0],"editor_dimensions":[256.0,300.0],"pads":[{"id":"audio_sink","group":"audio_sink","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":{"node":"kittentts_af3695c4","pad":"audio"},"allowed_types":[{"type":"audio"}]},{"id":"video_sink","group":"video_sink","type":"StatelessSinkPad","value":null,"next_pads":[],"previous_pad":null,"allowed_types":[{"type":"video"}]}],"description":"Outputs audio and video to the end user","metadata":{"primary":"core","secondary":"media","tags":["output","display"]}}]}}